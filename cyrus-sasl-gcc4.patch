--- cyrus-sasl-2.1.20/saslauthd/configure.in.orig	2005-04-24 16:39:30.088004312 +0000
+++ cyrus-sasl-2.1.20/saslauthd/configure.in	2005-04-24 16:40:31.172718024 +0000
@@ -44,9 +44,10 @@
 SASL_GSSAPI_CHK
 
 if test "$gssapi" != no; then
-	if test "$gss_impl" = "heimdal"; then
-	    AC_DEFINE(KRB5_HEIMDAL,[],[Using Heimdal])
-	fi
+dnl This is taken care of by -DKRB5_HEIMDAL in CPPFLAGS in ../Makefile
+dnl 	if test "$gss_impl" = "heimdal"; then
+dnl 	    AC_DEFINE(KRB5_HEIMDAL,[],[Using Heimdal])
+dnl 	fi
 	AC_DEFINE(HAVE_GSSAPI,[],[Include GSSAPI/Kerberos 5 Support])
 fi
 
--- cyrus-sasl-2.1.20/saslauthd/saslcache.c.orig	2005-04-24 16:47:45.989615808 +0000
+++ cyrus-sasl-2.1.20/saslauthd/saslcache.c	2005-04-24 16:50:27.482065224 +0000
@@ -137,7 +137,7 @@
 	}
 
 	table_stats = shm_base + 64;
-	(char *)table = (char *)table_stats + 128;
+	table = (struct bucket*)((char *)table_stats + 128);
 
 	if (dump_stat_info == 0 && dump_user_info == 0)
 		dump_stat_info = 1;
--- cyrus-sasl-2.1.22/plugins/digestmd5.c.orig	2009-07-02 15:21:59.000000000 +0200
+++ cyrus-sasl-2.1.22/plugins/digestmd5.c	2009-07-02 15:25:38.190152725 +0200
@@ -2743,7 +2743,7 @@
 	"DIGEST-MD5",			/* mech_name */
 #ifdef WITH_RC4
 	128,				/* max_ssf */
-#elif WITH_DES
+#elif defined(WITH_DES)
 	112,
 #else 
 	1,
@@ -4071,7 +4071,7 @@
 	"DIGEST-MD5",
 #ifdef WITH_RC4				/* mech_name */
 	128,				/* max ssf */
-#elif WITH_DES
+#elif defined(WITH_DES)
 	112,
 #else
 	1,
