--- cyrus-sasl-2.1.26/configure.in.orig	2012-11-23 18:34:17.205397115 +0100
+++ cyrus-sasl-2.1.26/configure.in	2012-11-23 19:02:35.208695057 +0100
@@ -269,27 +269,7 @@
 	with_pam=yes)
 if test "$with_pam" != no; then
   AC_CHECK_HEADERS(security/pam_appl.h pam/pam_appl.h)
-  cmu_save_LIBS="$LIBS"
-  AC_CHECK_FUNC(pam_start, :,
-	LIBS="-lpam $LIBS"
-	AC_TRY_LINK([[
-#include <sys/types.h>
-#ifdef HAVE_PAM_PAM_APPL_H
-#include <pam/pam_appl.h>
-#endif
-#ifdef HAVE_SECURITY_PAM_H
-#include <security/pam_appl.h>
-#endif]],[[
-const char *service="foo";
-const char *user="bar";
-pam_handle_t *pamh;
-struct pam_conv *conv;
-int baz;
-baz = pam_start(service, user, conv, &pamh);
-return 0;
-]], LIBPAM="-lpam")
-)
-  LIBS="$cmu_save_LIBS $LIBPAM"
+  AC_CHECK_LIB(pam, pam_start, LIBS="$LIBS -lpam")
 fi
 
 AC_ARG_WITH(saslauthd, [  --with-saslauthd=DIR    enable use of the saslauth daemon using state dir DIR ],
